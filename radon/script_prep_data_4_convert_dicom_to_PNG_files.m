clear('all'); close('all');

file_names = {
'ID_0000_AGE_0060_CONTRAST_1_CT.dcm', 
'ID_0001_AGE_0069_CONTRAST_1_CT.dcm', 
'ID_0002_AGE_0074_CONTRAST_1_CT.dcm', 
'ID_0003_AGE_0075_CONTRAST_1_CT.dcm', 
'ID_0004_AGE_0056_CONTRAST_1_CT.dcm', 
'ID_0005_AGE_0048_CONTRAST_1_CT.dcm', 
'ID_0006_AGE_0075_CONTRAST_1_CT.dcm', 
'ID_0007_AGE_0061_CONTRAST_1_CT.dcm', 
'ID_0008_AGE_0051_CONTRAST_1_CT.dcm', 
'ID_0009_AGE_0048_CONTRAST_1_CT.dcm', 
'ID_0010_AGE_0060_CONTRAST_1_CT.dcm', 
'ID_0011_AGE_0061_CONTRAST_1_CT.dcm', 
'ID_0012_AGE_0061_CONTRAST_1_CT.dcm', 
'ID_0013_AGE_0060_CONTRAST_1_CT.dcm', 
'ID_0014_AGE_0071_CONTRAST_1_CT.dcm', 
'ID_0015_AGE_0061_CONTRAST_1_CT.dcm', 
'ID_0016_AGE_0063_CONTRAST_1_CT.dcm', 
'ID_0017_AGE_0060_CONTRAST_1_CT.dcm', 
'ID_0018_AGE_0074_CONTRAST_1_CT.dcm', 
'ID_0019_AGE_0070_CONTRAST_1_CT.dcm', 
'ID_0020_AGE_0066_CONTRAST_1_CT.dcm', 
'ID_0021_AGE_0067_CONTRAST_1_CT.dcm', 
'ID_0022_AGE_0074_CONTRAST_1_CT.dcm', 
'ID_0023_AGE_0061_CONTRAST_1_CT.dcm', 
'ID_0024_AGE_0060_CONTRAST_1_CT.dcm', 
'ID_0025_AGE_0074_CONTRAST_1_CT.dcm', 
'ID_0026_AGE_0070_CONTRAST_1_CT.dcm', 
'ID_0027_AGE_0064_CONTRAST_1_CT.dcm', 
'ID_0028_AGE_0074_CONTRAST_1_CT.dcm', 
'ID_0029_AGE_0078_CONTRAST_1_CT.dcm', 
'ID_0030_AGE_0076_CONTRAST_1_CT.dcm', 
'ID_0031_AGE_0039_CONTRAST_1_CT.dcm', 
'ID_0032_AGE_0061_CONTRAST_1_CT.dcm', 
'ID_0033_AGE_0071_CONTRAST_1_CT.dcm', 
'ID_0034_AGE_0061_CONTRAST_1_CT.dcm', 
'ID_0035_AGE_0059_CONTRAST_1_CT.dcm', 
'ID_0036_AGE_0074_CONTRAST_1_CT.dcm', 
'ID_0037_AGE_0074_CONTRAST_1_CT.dcm', 
'ID_0038_AGE_0071_CONTRAST_1_CT.dcm', 
'ID_0039_AGE_0074_CONTRAST_1_CT.dcm', 
'ID_0040_AGE_0069_CONTRAST_1_CT.dcm', 
'ID_0041_AGE_0045_CONTRAST_1_CT.dcm', 
'ID_0042_AGE_0071_CONTRAST_1_CT.dcm', 
'ID_0043_AGE_0069_CONTRAST_1_CT.dcm', 
'ID_0044_AGE_0072_CONTRAST_1_CT.dcm', 
'ID_0045_AGE_0074_CONTRAST_1_CT.dcm', 
'ID_0046_AGE_0072_CONTRAST_1_CT.dcm', 
'ID_0047_AGE_0069_CONTRAST_1_CT.dcm', 
'ID_0048_AGE_0077_CONTRAST_1_CT.dcm', 
'ID_0049_AGE_0061_CONTRAST_1_CT.dcm', 
'ID_0050_AGE_0074_CONTRAST_0_CT.dcm', 
'ID_0051_AGE_0063_CONTRAST_0_CT.dcm', 
'ID_0052_AGE_0072_CONTRAST_0_CT.dcm', 
'ID_0053_AGE_0073_CONTRAST_0_CT.dcm', 
'ID_0054_AGE_0082_CONTRAST_0_CT.dcm', 
'ID_0055_AGE_0071_CONTRAST_0_CT.dcm', 
'ID_0056_AGE_0083_CONTRAST_0_CT.dcm', 
'ID_0057_AGE_0049_CONTRAST_0_CT.dcm', 
'ID_0058_AGE_0082_CONTRAST_0_CT.dcm', 
'ID_0059_AGE_0074_CONTRAST_0_CT.dcm', 
'ID_0060_AGE_0080_CONTRAST_0_CT.dcm', 
'ID_0061_AGE_0074_CONTRAST_0_CT.dcm', 
'ID_0062_AGE_0067_CONTRAST_0_CT.dcm', 
'ID_0063_AGE_0073_CONTRAST_0_CT.dcm', 
'ID_0064_AGE_0058_CONTRAST_0_CT.dcm', 
'ID_0065_AGE_0082_CONTRAST_0_CT.dcm', 
'ID_0066_AGE_0082_CONTRAST_0_CT.dcm', 
'ID_0067_AGE_0060_CONTRAST_0_CT.dcm', 
'ID_0068_AGE_0072_CONTRAST_0_CT.dcm', 
'ID_0069_AGE_0074_CONTRAST_0_CT.dcm', 
'ID_0070_AGE_0074_CONTRAST_0_CT.dcm', 
'ID_0071_AGE_0065_CONTRAST_0_CT.dcm', 
'ID_0072_AGE_0060_CONTRAST_0_CT.dcm', 
'ID_0073_AGE_0074_CONTRAST_0_CT.dcm', 
'ID_0074_AGE_0074_CONTRAST_0_CT.dcm', 
'ID_0075_AGE_0080_CONTRAST_0_CT.dcm', 
'ID_0076_AGE_0068_CONTRAST_0_CT.dcm', 
'ID_0077_AGE_0074_CONTRAST_0_CT.dcm', 
'ID_0078_AGE_0066_CONTRAST_0_CT.dcm', 
'ID_0079_AGE_0071_CONTRAST_0_CT.dcm', 
'ID_0080_AGE_0070_CONTRAST_0_CT.dcm', 
'ID_0081_AGE_0058_CONTRAST_0_CT.dcm', 
'ID_0082_AGE_0047_CONTRAST_0_CT.dcm', 
'ID_0083_AGE_0082_CONTRAST_0_CT.dcm', 
'ID_0084_AGE_0067_CONTRAST_0_CT.dcm', 
'ID_0085_AGE_0067_CONTRAST_0_CT.dcm', 
'ID_0086_AGE_0073_CONTRAST_0_CT.dcm', 
'ID_0087_AGE_0044_CONTRAST_0_CT.dcm', 
'ID_0088_AGE_0067_CONTRAST_0_CT.dcm', 
'ID_0089_AGE_0071_CONTRAST_0_CT.dcm', 
'ID_0090_AGE_0067_CONTRAST_0_CT.dcm', 
'ID_0091_AGE_0072_CONTRAST_0_CT.dcm', 
'ID_0092_AGE_0072_CONTRAST_0_CT.dcm', 
'ID_0093_AGE_0067_CONTRAST_0_CT.dcm', 
'ID_0094_AGE_0052_CONTRAST_0_CT.dcm', 
'ID_0095_AGE_0071_CONTRAST_0_CT.dcm', 
'ID_0096_AGE_0083_CONTRAST_0_CT.dcm', 
'ID_0097_AGE_0060_CONTRAST_0_CT.dcm', 
'ID_0098_AGE_0061_CONTRAST_0_CT.dcm', 
'ID_0099_AGE_0061_CONTRAST_0_CT.dcm'};

% Path to the dicom data
src_data = '/mn/kadingir/vegardantun_000000/nobackup/CT_images/dicom_dir'

for i = 1:length(file_names)
    im_name = file_names{i};
    fname = fullfile(src_data, im_name);

    [X, cmap] = dicomread(fname);
    X = uint8(double(X)/16); % Images are stored using 12-bit.

    dest  = 'res_512_png';
    imwrite(X, fullfile(dest, sprintf('im_nbr_%03d.png', i)));

    N = 256;
    dest = sprintf('res_%d_png', N);
    X_res = imresize(X, [N, N]);
    imwrite(X_res, fullfile(dest, sprintf('im_nbr_%03d.png', i)));

    N = 128;
    dest = sprintf('res_%d_png', N);
    X_res = imresize(X, [N, N]);
    imwrite(X_res, fullfile(dest, sprintf('im_nbr_%03d.png', i)));

end




